(()=>{var e={484:(e,t,n)=>{"use strict";var r;function i(e){return e.nodeType===e.ELEMENT_NODE}function o(e){var t=null==e?void 0:e.host;return Boolean((null==t?void 0:t.shadowRoot)===e)}function s(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function a(e){try{var t=e.rules||e.cssRules;return t?((n=Array.from(t).map(l).join("")).includes(" background-clip: text;")&&!n.includes(" -webkit-background-clip: text;")&&(n=n.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),n):null}catch(e){return null}var n}function l(e){var t=e.cssText;if(c(e))try{t=a(e.styleSheet)||t}catch(e){}return t}function c(e){return"styleSheet"in e}n.r(t),n.d(t,{IGNORED_NODE:()=>y,Mirror:()=>d,NodeType:()=>r,addHoverClass:()=>j,buildNodeWithSN:()=>Y,classMatchesRegex:()=>N,cleanupSnapshot:()=>R,createCache:()=>U,createMirror:()=>u,genId:()=>k,getCssRuleString:()=>l,getCssRulesString:()=>a,is2DCanvasBlank:()=>p,isCSSImportRule:()=>c,isElement:()=>i,isNativeShadowDom:()=>s,isShadowRoot:()=>o,maskInputValue:()=>h,needMaskingText:()=>I,rebuild:()=>X,serializeNodeWithId:()=>O,snapshot:()=>z,transformAttribute:()=>_,visitSnapshot:()=>D}),function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(r||(r={}));var d=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(e){var t;if(!e)return-1;var n=null===(t=this.getMeta(e))||void 0===t?void 0:t.id;return null!=n?n:-1},e.prototype.getNode=function(e){return this.idNodeMap.get(e)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(e){return this.nodeMetaMap.get(e)||null},e.prototype.removeNodeFromMap=function(e){var t=this,n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))},e.prototype.has=function(e){return this.idNodeMap.has(e)},e.prototype.hasNode=function(e){return this.nodeMetaMap.has(e)},e.prototype.add=function(e,t){var n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)},e.prototype.replace=function(e,t){var n=this.getNode(e);if(n){var r=this.nodeMetaMap.get(n);r&&this.nodeMetaMap.set(t,r)}this.idNodeMap.set(e,t)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function u(){return new d}function h(e){var t=e.maskInputOptions,n=e.tagName,r=e.type,i=e.value,o=e.maskInputFn,s=i||"";return(t[n.toLowerCase()]||t[r])&&(s=o?o(s):"*".repeat(s.length)),s}var m="__rrweb_original__";function p(e){var t=e.getContext("2d");if(!t)return!0;for(var n=0;n<e.width;n+=50)for(var r=0;r<e.height;r+=50){var i=t.getImageData,o=m in i?i[m]:i;if(new Uint32Array(o.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((function(e){return 0!==e})))return!1}return!0}var f,v,g=1,w=new RegExp("[^a-z0-9-_:]"),y=-2;function k(){return g++}var b=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,E=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,S=/^(data:)([^,]*),(.*)/i;function T(e,t){return(e||"").replace(b,(function(e,n,r,i,o,s){var a,l=r||o||s,c=n||i||"";if(!l)return e;if(!E.test(l))return"url(".concat(c).concat(l).concat(c,")");if(S.test(l))return"url(".concat(c).concat(l).concat(c,")");if("/"===l[0])return"url(".concat(c).concat((a=t,(a.indexOf("//")>-1?a.split("/").slice(0,3).join("/"):a.split("/")[0]).split("?")[0]+l)).concat(c,")");var d=t.split("/"),u=l.split("/");d.pop();for(var h=0,m=u;h<m.length;h++){var p=m[h];"."!==p&&(".."===p?d.pop():d.push(p))}return"url(".concat(c).concat(d.join("/")).concat(c,")")}))}var C=/^[^ \t\n\r\u000c]+/,L=/^[, \t\n\r\u000c]+/;function x(e,t){if(!t||""===t.trim())return t;var n=e.createElement("a");return n.href=t,n.href}function M(){var e=document.createElement("a");return e.href="",e.href}function _(e,t,n,r){return"src"===n||"href"===n&&r&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&r&&"#"!==r[0]?x(e,r):"background"!==n||!r||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n&&r?function(e,t){if(""===t.trim())return t;var n=0;function r(e){var r,i=e.exec(t.substring(n));return i?(r=i[0],n+=r.length,r):""}for(var i=[];r(L),!(n>=t.length);){var o=r(C);if(","===o.slice(-1))o=x(e,o.substring(0,o.length-1)),i.push(o);else{var s="";o=x(e,o);for(var a=!1;;){var l=t.charAt(n);if(""===l){i.push((o+s).trim());break}if(a)")"===l&&(a=!1);else{if(","===l){n+=1,i.push((o+s).trim());break}"("===l&&(a=!0)}s+=l,n+=1}}}return i.join(", ")}(e,r):"style"===n&&r?T(r,M()):"object"===t&&"data"===n&&r?x(e,r):r:x(e,r)}function N(e,t,n){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!n&&N(e.parentNode,t,n);for(var r=e.classList.length;r--;){var i=e.classList[r];if(t.test(i))return!0}return!!n&&N(e.parentNode,t,n)}function I(e,t,n){var r=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===r)return!1;if("string"==typeof t){if(r.classList.contains(t))return!0;if(r.closest(".".concat(t)))return!0}else if(N(r,t,!0))return!0;if(n){if(r.matches(n))return!0;if(r.closest(n))return!0}return!1}function A(e){return void 0===e?"":e.toLowerCase()}function O(e,t){var n,l=t.doc,c=t.mirror,d=t.blockClass,u=t.blockSelector,m=t.maskTextClass,g=t.maskTextSelector,b=t.skipChild,E=void 0!==b&&b,S=t.inlineStylesheet,C=void 0===S||S,L=t.maskInputOptions,x=void 0===L?{}:L,N=t.maskTextFn,z=t.maskInputFn,D=t.slimDOMOptions,R=t.dataURLOptions,P=void 0===R?{}:R,F=t.inlineImages,W=void 0!==F&&F,B=t.recordCanvas,V=void 0!==B&&B,q=t.onSerialize,H=t.onIframeLoad,j=t.iframeLoadTimeout,U=void 0===j?5e3:j,Y=t.onStylesheetLoad,X=t.stylesheetLoadTimeout,$=void 0===X?5e3:X,G=t.keepIframeSrcFn,Z=void 0===G?function(){return!1}:G,J=t.newlyAddedElement,K=void 0!==J&&J,Q=t.preserveWhiteSpace,ee=void 0===Q||Q,te=function(e,t){var n=t.doc,i=t.mirror,o=t.blockClass,s=t.blockSelector,l=t.maskTextClass,c=t.maskTextSelector,d=t.inlineStylesheet,u=t.maskInputOptions,m=void 0===u?{}:u,g=t.maskTextFn,y=t.maskInputFn,k=t.dataURLOptions,b=void 0===k?{}:k,E=t.inlineImages,S=t.recordCanvas,C=t.keepIframeSrcFn,L=t.newlyAddedElement,x=void 0!==L&&L,N=function(e,t){if(t.hasNode(e)){var n=t.getId(e);return 1===n?void 0:n}}(n,i);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:r.Document,childNodes:[],compatMode:e.compatMode}:{type:r.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:r.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:N};case e.ELEMENT_NODE:return function(e,t){for(var n=t.doc,i=t.inlineStylesheet,o=t.maskInputOptions,s=void 0===o?{}:o,l=t.maskInputFn,c=t.dataURLOptions,d=void 0===c?{}:c,u=t.inlineImages,m=t.recordCanvas,g=t.keepIframeSrcFn,y=t.newlyAddedElement,k=void 0!==y&&y,b=t.rootId,E=function(e,t,n){if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var r=e.classList.length;r--;){var i=e.classList[r];if(t.test(i))return!0}return!!n&&e.matches(n)}(e,t.blockClass,t.blockSelector),S=function(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return w.test(t)?"div":t}(e),C={},L=e.attributes.length,x=0;x<L;x++){var N=e.attributes[x];C[N.name]=_(n,S,N.name,N.value)}if("link"===S&&i){var I=Array.from(n.styleSheets).find((function(t){return t.href===e.href})),A=null;I&&(A=a(I)),A&&(delete C.rel,delete C.href,C._cssText=T(A,I.href))}if("style"===S&&e.sheet&&!(e.innerText||e.textContent||"").trim().length&&(A=a(e.sheet))&&(C._cssText=T(A,M())),"input"===S||"textarea"===S||"select"===S){var O=e.value,z=e.checked;"radio"!==C.type&&"checkbox"!==C.type&&"submit"!==C.type&&"button"!==C.type&&O?C.value=h({type:C.type,tagName:S,value:O,maskInputOptions:s,maskInputFn:l}):z&&(C.checked=z)}if("option"===S&&(e.selected&&!s.select?C.selected=!0:delete C.selected),"canvas"===S&&m)if("2d"===e.__context)p(e)||(C.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){var D=e.toDataURL(d.type,d.quality),R=document.createElement("canvas");R.width=e.width,R.height=e.height,D!==R.toDataURL(d.type,d.quality)&&(C.rr_dataURL=D)}if("img"===S&&u){f||(f=n.createElement("canvas"),v=f.getContext("2d"));var P=e,F=P.crossOrigin;P.crossOrigin="anonymous";var W=function(){try{f.width=P.naturalWidth,f.height=P.naturalHeight,v.drawImage(P,0,0),C.rr_dataURL=f.toDataURL(d.type,d.quality)}catch(e){console.warn("Cannot inline img src=".concat(P.currentSrc,"! Error: ").concat(e))}F?C.crossOrigin=F:P.removeAttribute("crossorigin")};P.complete&&0!==P.naturalWidth?W():P.onload=W}if("audio"!==S&&"video"!==S||(C.rr_mediaState=e.paused?"paused":"played",C.rr_mediaCurrentTime=e.currentTime),k||(e.scrollLeft&&(C.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(C.rr_scrollTop=e.scrollTop)),E){var B=e.getBoundingClientRect(),V=B.width,q=B.height;C={class:C.class,rr_width:"".concat(V,"px"),rr_height:"".concat(q,"px")}}return"iframe"!==S||g(C.src)||(e.contentDocument||(C.rr_src=C.src),delete C.src),{type:r.Element,tagName:S,attributes:C,childNodes:[],isSVG:(H=e,Boolean("svg"===H.tagName||H.ownerSVGElement)||void 0),needBlock:E,rootId:b};var H}(e,{doc:n,blockClass:o,blockSelector:s,inlineStylesheet:d,maskInputOptions:m,maskInputFn:y,dataURLOptions:b,inlineImages:E,recordCanvas:S,keepIframeSrcFn:C,newlyAddedElement:x,rootId:N});case e.TEXT_NODE:return function(e,t){var n,i,o=t.maskTextClass,s=t.maskTextSelector,a=t.maskTextFn,l=t.rootId,c=e.parentNode&&e.parentNode.tagName,d=e.textContent,u="STYLE"===c||void 0,h="SCRIPT"===c||void 0;if(u&&d){try{e.nextSibling||e.previousSibling||(null===(n=e.parentNode.sheet)||void 0===n?void 0:n.cssRules)&&(d=(i=e.parentNode.sheet).cssRules?Array.from(i.cssRules).map((function(e){return e.cssText||""})).join(""):"")}catch(t){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(t),e)}d=T(d,M())}return h&&(d="SCRIPT_PLACEHOLDER"),!u&&!h&&d&&I(e,o,s)&&(d=a?a(d):d.replace(/[\S]/g,"*")),{type:r.Text,textContent:d||"",isStyle:u,rootId:l}}(e,{maskTextClass:l,maskTextSelector:c,maskTextFn:g,rootId:N});case e.CDATA_SECTION_NODE:return{type:r.CDATA,textContent:"",rootId:N};case e.COMMENT_NODE:return{type:r.Comment,textContent:e.textContent||"",rootId:N};default:return!1}}(e,{doc:l,mirror:c,blockClass:d,blockSelector:u,maskTextClass:m,maskTextSelector:g,inlineStylesheet:C,maskInputOptions:x,maskTextFn:N,maskInputFn:z,dataURLOptions:P,inlineImages:W,recordCanvas:V,keepIframeSrcFn:Z,newlyAddedElement:K});if(!te)return console.warn(e,"not serialized"),null;n=c.hasNode(e)?c.getId(e):!function(e,t){if(t.comment&&e.type===r.Comment)return!0;if(e.type===r.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&"preload"===e.attributes.rel&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(A(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===A(e.attributes.name)||"icon"===A(e.attributes.rel)||"apple-touch-icon"===A(e.attributes.rel)||"shortcut icon"===A(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&A(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(A(e.attributes.property).match(/^(og|twitter|fb):/)||A(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===A(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===A(e.attributes.name)||"googlebot"===A(e.attributes.name)||"bingbot"===A(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===A(e.attributes.name)||"generator"===A(e.attributes.name)||"framework"===A(e.attributes.name)||"publisher"===A(e.attributes.name)||"progid"===A(e.attributes.name)||A(e.attributes.property).match(/^article:/)||A(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===A(e.attributes.name)||"yandex-verification"===A(e.attributes.name)||"csrf-token"===A(e.attributes.name)||"p:domain_verify"===A(e.attributes.name)||"verify-v1"===A(e.attributes.name)||"verification"===A(e.attributes.name)||"shopify-checkout-api-token"===A(e.attributes.name)))return!0}}return!1}(te,D)&&(ee||te.type!==r.Text||te.isStyle||te.textContent.replace(/^\s+|\s+$/gm,"").length)?k():y;var ne=Object.assign(te,{id:n});if(c.add(e,ne),n===y)return null;q&&q(e);var re=!E;if(ne.type===r.Element){re=re&&!ne.needBlock,delete ne.needBlock;var ie=e.shadowRoot;ie&&s(ie)&&(ne.isShadowHost=!0)}if((ne.type===r.Document||ne.type===r.Element)&&re){D.headWhitespace&&ne.type===r.Element&&"head"===ne.tagName&&(ee=!1);for(var oe={doc:l,mirror:c,blockClass:d,blockSelector:u,maskTextClass:m,maskTextSelector:g,skipChild:E,inlineStylesheet:C,maskInputOptions:x,maskTextFn:N,maskInputFn:z,slimDOMOptions:D,dataURLOptions:P,inlineImages:W,recordCanvas:V,preserveWhiteSpace:ee,onSerialize:q,onIframeLoad:H,iframeLoadTimeout:U,onStylesheetLoad:Y,stylesheetLoadTimeout:$,keepIframeSrcFn:Z},se=0,ae=Array.from(e.childNodes);se<ae.length;se++)(de=O(ae[se],oe))&&ne.childNodes.push(de);if(i(e)&&e.shadowRoot)for(var le=0,ce=Array.from(e.shadowRoot.childNodes);le<ce.length;le++){var de;(de=O(ce[le],oe))&&(s(e.shadowRoot)&&(de.isShadow=!0),ne.childNodes.push(de))}}return e.parentNode&&o(e.parentNode)&&s(e.parentNode)&&(ne.isShadow=!0),ne.type===r.Element&&"iframe"===ne.tagName&&function(e,t,n){var r=e.contentWindow;if(r){var i,o=!1;try{i=r.document.readyState}catch(e){return}if("complete"===i){var s="about:blank";if(r.location.href!==s||e.src===s||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}else{var a=setTimeout((function(){o||(t(),o=!0)}),n);e.addEventListener("load",(function(){clearTimeout(a),o=!0,t()}))}}}(e,(function(){var t=e.contentDocument;if(t&&H){var n=O(t,{doc:t,mirror:c,blockClass:d,blockSelector:u,maskTextClass:m,maskTextSelector:g,skipChild:!1,inlineStylesheet:C,maskInputOptions:x,maskTextFn:N,maskInputFn:z,slimDOMOptions:D,dataURLOptions:P,inlineImages:W,recordCanvas:V,preserveWhiteSpace:ee,onSerialize:q,onIframeLoad:H,iframeLoadTimeout:U,onStylesheetLoad:Y,stylesheetLoadTimeout:$,keepIframeSrcFn:Z});n&&H(e,n)}}),U),ne.type===r.Element&&"link"===ne.tagName&&"stylesheet"===ne.attributes.rel&&function(e,t,n){var r,i=!1;try{r=e.sheet}catch(e){return}if(!r){var o=setTimeout((function(){i||(t(),i=!0)}),n);e.addEventListener("load",(function(){clearTimeout(o),i=!0,t()}))}}(e,(function(){if(Y){var t=O(e,{doc:l,mirror:c,blockClass:d,blockSelector:u,maskTextClass:m,maskTextSelector:g,skipChild:!1,inlineStylesheet:C,maskInputOptions:x,maskTextFn:N,maskInputFn:z,slimDOMOptions:D,dataURLOptions:P,inlineImages:W,recordCanvas:V,preserveWhiteSpace:ee,onSerialize:q,onIframeLoad:H,iframeLoadTimeout:U,onStylesheetLoad:Y,stylesheetLoadTimeout:$,keepIframeSrcFn:Z});t&&Y(e,t)}}),$),ne}function z(e,t){var n=t||{},r=n.mirror,i=void 0===r?new d:r,o=n.blockClass,s=void 0===o?"rr-block":o,a=n.blockSelector,l=void 0===a?null:a,c=n.maskTextClass,u=void 0===c?"rr-mask":c,h=n.maskTextSelector,m=void 0===h?null:h,p=n.inlineStylesheet,f=void 0===p||p,v=n.inlineImages,g=void 0!==v&&v,w=n.recordCanvas,y=void 0!==w&&w,k=n.maskAllInputs,b=void 0!==k&&k,E=n.maskTextFn,S=n.maskInputFn,T=n.slimDOM,C=void 0!==T&&T,L=n.dataURLOptions,x=n.preserveWhiteSpace,M=n.onSerialize,_=n.onIframeLoad,N=n.iframeLoadTimeout,I=n.onStylesheetLoad,A=n.stylesheetLoadTimeout,z=n.keepIframeSrcFn;return O(e,{doc:e,mirror:i,blockClass:s,blockSelector:l,maskTextClass:u,maskTextSelector:m,skipChild:!1,inlineStylesheet:f,maskInputOptions:!0===b?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===b?{password:!0}:b,maskTextFn:E,maskInputFn:S,slimDOMOptions:!0===C||"all"===C?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===C,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===C?{}:C,dataURLOptions:L,inlineImages:g,recordCanvas:y,preserveWhiteSpace:x,onSerialize:M,onIframeLoad:_,iframeLoadTimeout:N,onStylesheetLoad:I,stylesheetLoadTimeout:A,keepIframeSrcFn:void 0===z?function(){return!1}:z,newlyAddedElement:!1})}function D(e,t){!function e(n){t(n),n.type!==r.Document&&n.type!==r.Element||n.childNodes.forEach(e)}(e)}function R(){g=1}var P=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function F(e,t){void 0===t&&(t={});var n=1,r=1;function i(e){var t=e.match(/\n/g);t&&(n+=t.length);var i=e.lastIndexOf("\n");r=-1===i?r+e.length:e.length-i}function o(){var e={line:n,column:r};return function(t){return t.position=new s(e),m(),t}}var s=function(e){this.start=e,this.end={line:n,column:r},this.source=t.source};s.prototype.content=e;var a=[];function l(i){var o=new Error("".concat(t.source||"",":").concat(n,":").concat(r,": ").concat(i));if(o.reason=i,o.filename=t.source,o.line=n,o.column=r,o.source=e,!t.silent)throw o;a.push(o)}function c(){return h(/^{\s*/)}function d(){return h(/^}/)}function u(){var t,n,r,i=[];for(m(),p(i);e.length&&"}"!==e.charAt(0)&&(t=C()||(n=void 0,r=void 0,n=o(),(r=v())?(p(),n({type:"rule",selectors:r,declarations:w()})):l("selector missing")));)!1!==t&&(i.push(t),p(i));return i}function h(t){var n=t.exec(e);if(n){var r=n[0];return i(r),e=e.slice(r.length),n}}function m(){h(/^\s*/)}function p(e){var t;for(void 0===e&&(e=[]);t=f();)!1!==t&&e.push(t),t=f();return e}function f(){var t=o();if("/"===e.charAt(0)&&"*"===e.charAt(1)){for(var n=2;""!==e.charAt(n)&&("*"!==e.charAt(n)||"/"!==e.charAt(n+1));)++n;if(n+=2,""===e.charAt(n-1))return l("End of comment missing");var s=e.slice(2,n-2);return r+=2,i(s),e=e.slice(n),r+=2,t({type:"comment",comment:s})}}function v(){var e=h(/^([^{]+)/);if(e)return W(e[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,(function(e){return e.replace(/,/g,"â€Œ")})).split(/\s*(?![^(]*\)),\s*/).map((function(e){return e.replace(/\u200C/g,",")}))}function g(){var e=o(),t=h(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(t){var n=W(t[0]);if(!h(/^:\s*/))return l("property missing ':'");var r=h(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),i=e({type:"declaration",property:n.replace(P,""),value:r?W(r[0]).replace(P,""):""});return h(/^[;\s]*/),i}}function w(){var e,t=[];if(!c())return l("missing '{'");for(p(t);e=g();)!1!==e&&(t.push(e),p(t)),e=g();return d()?t:l("missing '}'")}function y(){for(var e,t=[],n=o();e=h(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)t.push(e[1]),h(/^,\s*/);if(t.length)return n({type:"keyframe",values:t,declarations:w()})}var k,b=T("import"),E=T("charset"),S=T("namespace");function T(e){var t=new RegExp("^@"+e+"\\s*([^;]+);");return function(){var n=o(),r=h(t);if(r){var i={type:e};return i[e]=r[1].trim(),n(i)}}}function C(){if("@"===e[0])return function(){var e=o(),t=h(/^@([-\w]+)?keyframes\s*/);if(t){var n=t[1];if(!(t=h(/^([-\w]+)\s*/)))return l("@keyframes missing name");var r,i=t[1];if(!c())return l("@keyframes missing '{'");for(var s=p();r=y();)s.push(r),s=s.concat(p());return d()?e({type:"keyframes",name:i,vendor:n,keyframes:s}):l("@keyframes missing '}'")}}()||function(){var e=o(),t=h(/^@media *([^{]+)/);if(t){var n=W(t[1]);if(!c())return l("@media missing '{'");var r=p().concat(u());return d()?e({type:"media",media:n,rules:r}):l("@media missing '}'")}}()||function(){var e=o(),t=h(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(t)return e({type:"custom-media",name:W(t[1]),media:W(t[2])})}()||function(){var e=o(),t=h(/^@supports *([^{]+)/);if(t){var n=W(t[1]);if(!c())return l("@supports missing '{'");var r=p().concat(u());return d()?e({type:"supports",supports:n,rules:r}):l("@supports missing '}'")}}()||b()||E()||S()||function(){var e=o(),t=h(/^@([-\w]+)?document *([^{]+)/);if(t){var n=W(t[1]),r=W(t[2]);if(!c())return l("@document missing '{'");var i=p().concat(u());return d()?e({type:"document",document:r,vendor:n,rules:i}):l("@document missing '}'")}}()||function(){var e=o();if(h(/^@page */)){var t=v()||[];if(!c())return l("@page missing '{'");for(var n,r=p();n=g();)r.push(n),r=r.concat(p());return d()?e({type:"page",selectors:t,declarations:r}):l("@page missing '}'")}}()||function(){var e=o();if(h(/^@host\s*/)){if(!c())return l("@host missing '{'");var t=p().concat(u());return d()?e({type:"host",rules:t}):l("@host missing '}'")}}()||function(){var e=o();if(h(/^@font-face\s*/)){if(!c())return l("@font-face missing '{'");for(var t,n=p();t=g();)n.push(t),n=n.concat(p());return d()?e({type:"font-face",declarations:n}):l("@font-face missing '}'")}}()}return B((k=u(),{type:"stylesheet",stylesheet:{source:t.source,rules:k,parsingErrors:a}}))}function W(e){return e?e.replace(/^\s+|\s+$/g,""):""}function B(e,t){for(var n=e&&"string"==typeof e.type,r=n?e:t,i=0,o=Object.keys(e);i<o.length;i++){var s=e[o[i]];Array.isArray(s)?s.forEach((function(e){B(e,r)})):s&&"object"==typeof s&&B(s,r)}return n&&Object.defineProperty(e,"parent",{configurable:!0,writable:!0,enumerable:!1,value:t||null}),e}var V={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"},q=/([^\\]):hover/,H=new RegExp(q.source,"g");function j(e,t){var n=null==t?void 0:t.stylesWithHoverClass.get(e);if(n)return n;var r=F(e,{silent:!0});if(!r.stylesheet)return e;var i=[];if(r.stylesheet.rules.forEach((function(e){"selectors"in e&&(e.selectors||[]).forEach((function(e){q.test(e)&&i.push(e)}))})),0===i.length)return e;var o=new RegExp(i.filter((function(e,t){return i.indexOf(e)===t})).sort((function(e,t){return t.length-e.length})).map((function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})).join("|"),"g"),s=e.replace(o,(function(e){var t=e.replace(H,"$1.\\:hover");return"".concat(e,", ").concat(t)}));return null==t||t.stylesWithHoverClass.set(e,s),s}function U(){return{stylesWithHoverClass:new Map}}function Y(e,t){var n=t.doc,o=t.mirror,s=t.skipChild,a=void 0!==s&&s,l=t.hackCss,c=void 0===l||l,d=t.afterAppend,u=t.cache,h=function(e,t){var n=t.doc,i=t.hackCss,o=t.cache;switch(e.type){case r.Document:return n.implementation.createDocument(null,"",null);case r.DocumentType:return n.implementation.createDocumentType(e.name||"html",e.publicId,e.systemId);case r.Element:var s,a=function(e){var t=V[e.tagName]?V[e.tagName]:e.tagName;return"link"===t&&e.attributes._cssText&&(t="style"),t}(e);s=e.isSVG?n.createElementNS("http://www.w3.org/2000/svg",a):n.createElement(a);var l={};for(var c in e.attributes)if(Object.prototype.hasOwnProperty.call(e.attributes,c)){var d=e.attributes[c];if("option"!==a||"selected"!==c||!1!==d)if(!0===d&&(d=""),c.startsWith("rr_"))l[c]=d;else{var u="textarea"===a&&"value"===c,h="style"===a&&"_cssText"===c;if(h&&i&&"string"==typeof d&&(d=j(d,o)),!u&&!h||"string"!=typeof d)try{if(e.isSVG&&"xlink:href"===c)s.setAttributeNS("http://www.w3.org/1999/xlink",c,d.toString());else if("onload"===c||"onclick"===c||"onmouse"===c.substring(0,7))s.setAttribute("_"+c,d.toString());else{if("meta"===a&&"Content-Security-Policy"===e.attributes["http-equiv"]&&"content"===c){s.setAttribute("csp-content",d.toString());continue}"link"===a&&"preload"===e.attributes.rel&&"script"===e.attributes.as||"link"===a&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")||("img"===a&&e.attributes.srcset&&e.attributes.rr_dataURL?s.setAttribute("rrweb-original-srcset",e.attributes.srcset):s.setAttribute(c,d.toString()))}}catch(e){}else{for(var m=n.createTextNode(d),p=0,f=Array.from(s.childNodes);p<f.length;p++){var v=f[p];v.nodeType===s.TEXT_NODE&&s.removeChild(v)}s.appendChild(m)}}}var g=function(t){var n=l[t];if("canvas"===a&&"rr_dataURL"===t){var r=document.createElement("img");r.onload=function(){var e=s.getContext("2d");e&&e.drawImage(r,0,0,r.width,r.height)},r.src=n.toString(),s.RRNodeType&&(s.rr_dataURL=n.toString())}else if("img"===a&&"rr_dataURL"===t){var i=s;i.currentSrc.startsWith("data:")||(i.setAttribute("rrweb-original-src",e.attributes.src),i.src=n.toString())}if("rr_width"===t)s.style.width=n.toString();else if("rr_height"===t)s.style.height=n.toString();else if("rr_mediaCurrentTime"===t&&"number"==typeof n)s.currentTime=n;else if("rr_mediaState"===t)switch(n){case"played":s.play().catch((function(e){return console.warn("media playback error",e)}));break;case"paused":s.pause()}};for(var w in l)g(w);if(e.isShadowHost)if(s.shadowRoot)for(;s.shadowRoot.firstChild;)s.shadowRoot.removeChild(s.shadowRoot.firstChild);else s.attachShadow({mode:"open"});return s;case r.Text:return n.createTextNode(e.isStyle&&i?j(e.textContent,o):e.textContent);case r.CDATA:return n.createCDATASection(e.textContent);case r.Comment:return n.createComment(e.textContent);default:return null}}(e,{doc:n,hackCss:c,cache:u});if(!h)return null;if(e.rootId&&o.getNode(e.rootId)!==n&&o.replace(e.rootId,n),e.type===r.Document&&(n.close(),n.open(),"BackCompat"===e.compatMode&&e.childNodes&&e.childNodes[0].type!==r.DocumentType&&(e.childNodes[0].type===r.Element&&"xmlns"in e.childNodes[0].attributes&&"http://www.w3.org/1999/xhtml"===e.childNodes[0].attributes.xmlns?n.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'):n.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">')),h=n),o.add(h,e),(e.type===r.Document||e.type===r.Element)&&!a)for(var m=0,p=e.childNodes;m<p.length;m++){var f=p[m],v=Y(f,{doc:n,mirror:o,skipChild:!1,hackCss:c,afterAppend:d,cache:u});v?(f.isShadow&&i(h)&&h.shadowRoot?h.shadowRoot.appendChild(v):h.appendChild(v),d&&d(v,f.id)):console.warn("Failed to rebuild",f)}return h}function X(e,t){var n=t.doc,i=t.onVisit,o=t.hackCss,s=void 0===o||o,a=t.afterAppend,l=t.cache,c=t.mirror,u=void 0===c?new d:c,h=Y(e,{doc:n,mirror:u,skipChild:!1,hackCss:s,afterAppend:a,cache:l});return function(e,t){for(var n=0,r=e.getIds();n<r.length;n++){var i=r[n];e.has(i)&&t(e.getNode(i))}}(u,(function(e){i&&i(e),function(e,t){var n=t.getMeta(e);if((null==n?void 0:n.type)===r.Element){var i=e;for(var o in n.attributes)if(Object.prototype.hasOwnProperty.call(n.attributes,o)&&o.startsWith("rr_")){var s=n.attributes[o];"rr_scrollLeft"===o&&(i.scrollLeft=s),"rr_scrollTop"===o&&(i.scrollTop=s)}}}(e,u)})),h}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}function r(){if(function(){if(void 0!==window.location.ancestorOrigins){if((window.self!==window.top&&~["webvizio.my","app.webvizio.com","test.webvizio.com","webvizio.loc","webvizio.app.localhost"].indexOf((e=window.location.ancestorOrigins[0],e&&""!==e?(e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0]).split(":")[0].split("?")[0]:""))||~location.href.indexOf("wv_task="))&&!document.body.classList.contains("webvizio"))return!0}else if((window.self!==window.top||~location.href.indexOf("wv_task="))&&!document.body.classList.contains("webvizio"))return!0;var e;return!1}()){let t=n(484);var e={tasks:[],currentTask:null,viewMode:"start",host:null,url:null,taskSnapshot:null,rerenderTimeoutID:null,tasksPanelVisible:null,lastHoverElPath:null,sourceType:"page",makeScreenshot:!1,fileSize:[0,0],scriptOrigin:"",role:"assignee",notFoundMarkers:[],advancedSettings:[],snapshotMode:!1,init:function(){if(void 0!==window.parent.postMessage)this.parentWindow=window.parent;else{if(void 0===window.top.postMessage)return console.log("Webvizio is stopped - postMessage blocked"),!1;this.parentWindow=window.top}addEventListener("click",this.clickEventListener.bind(this),!0),addEventListener("mousedown",this.disableMouseClickEventsListener.bind(this),!0),addEventListener("mouseup",this.disableMouseClickEventsListener.bind(this),!0),addEventListener("message",this.messageEventListener.bind(this),!1),addEventListener("mouseover",this.mouseoverEventListener.bind(this),!1),addEventListener("mouseout",this.mouseoutEventListener.bind(this),!1),addEventListener("mousemove",this.mousemoveEventListener.bind(this),!1),addEventListener("keydown",this.keydownEventListener.bind(this),!1),addEventListener("resize",this.resizeEventListener.bind(this),!1),addEventListener("scroll",this.scrollEventListener.bind(this),!1),addEventListener("load",this.loadEventListener.bind(this),!1),addEventListener("WebVizioEvent",function(e){console.log("def",e.detail.prevEvent.defaultPrevented)}.bind(this)),this.parentWindow.postMessage({message:"Frame",method:"setFrameHasScript"},"*"),document.body.classList.add("webvizio");var t=document.getElementById("webvizio_script");if(t){var n=t.getAttribute("src"),r=new URL(n);this.scriptOrigin=r.origin}let i=function(){this.getParameterByName("wv_task")||this.getTasks()}.bind(this);this.addCss(this.scriptOrigin+"/css/webvizio.css",i),document.querySelector("html").classList.add("webvizio-full-access"),(()=>{let t=history.pushState;history.pushState=function(n){if(window.dispatchEvent(new Event("locationchange")),"browse"===e.viewMode)return console.warn("pushState in browse mode"),!1;{let e=t.apply(this,arguments);return window.dispatchEvent(new Event("pushstate")),e}};let n=history.replaceState;history.replaceState=function(t){if(window.dispatchEvent(new Event("locationchange")),"browse"===e.viewMode)return console.warn("replaceState in browse mode"),!1;{let e=n.apply(this,arguments);return window.dispatchEvent(new Event("replacestate")),e}},window.addEventListener("popstate",(()=>{window.dispatchEvent(new Event("locationchange"))}))})(),window.addEventListener("locationchange",(function(t){e.currentLocation=t.currentTarget.location}))},getLocationSearch(e){if(!e)return e;var t=!1;"?"===e[0]&&(t=!0,e=e.substring(1));var n=e.split("&");return n.forEach((function(e,t){"wv"===e.split("=")[0]&&n.splice(t,1)})),e=n.join("&"),t&&(e="?"+e),e},getTaskForScreenshot(e){const t=new XMLHttpRequest;var n="";if(this.scriptOrigin)n=this.scriptOrigin;else{var r=location.hostname.split(".");~location.href.indexOf("/open_visual?file=")||r.shift(),n=location.protocol+"//"+r.join(".")}var i=n+"/task/"+e+"/snapshot_url";t.open("GET",i),t.addEventListener("readystatechange",(()=>{if(4===t.readyState&&200===t.status){let e=JSON.parse(t.responseText).result.url;this.loadSnapshot(e)}})),t.send()},addCss:function(e,t=!1){var n=document.head,r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=e,t&&(r.onload=t),n.appendChild(r)},addJs:function(e){var t=document.head,n=document.createElement("script");n.type="text/javascript",n.src=e,t.appendChild(n)},loadEventListener:function(t){this.setFileSize(),this.advancedSettings.includes("snapshot_styles")&&setTimeout(function(){Array.from(document.querySelectorAll('link[rel="stylesheet"]')).filter((e=>!e.href.startsWith(window.location.origin))).forEach((function(e){let t=e.cloneNode(!0);t.removeAttribute("onload"),t.removeAttribute("onerror"),t.setAttribute("crossorigin","anonymous"),e.parentNode.removeChild(e),document.head.appendChild(t)}))}.bind(e),1e3);var n=this.getParameterByName("wv_task");n?this.getTaskForScreenshot(n):this.getTasks()},setFileSize:function(){var e=document.getElementById("webvizio_file");if(e){var t=e.clientWidth,n=e.clientHeight;this.fileSize=[t,n],this.parentWindow.postMessage({message:"Frame",method:"setFileSize",fileSize:this.fileSize},"*"),e.style.width="100%",e.style.height="auto"}},replaceRelativeLinks:function(){for(var e=document.getElementsByTagName("a"),t=0;t<e.length;t++)window.WV_SCHEME&&window.WV_HOST&&0!==e[t].href.indexOf(window.WV_SCHEME+"://")&&(e[t].href=window.WV_SCHEME+"://"+window.WV_HOST+("/"!==e[t].href[0]?"/":"")+e[t].href)},resizeEventListener:function(t){this.hideExternalDomainLinkTooltip(),this.rerenderTimeoutID&&clearTimeout(this.rerenderTimeoutID);let n=100;"page"!==this.sourceType&&(n=50),this.rerenderTimeoutID=setTimeout(function(){this.clearMarkers(!0),this.renderMarkers()}.bind(e),n)},scrollEventListener:function(t){this.rerenderTimeoutID&&clearTimeout(this.rerenderTimeoutID),this.rerenderTimeoutID=setTimeout(function(){this.clearMarkers(!0),this.renderMarkers()}.bind(e),500)},mousemoveEventListener:function(t){this.rerenderTimeoutID&&clearTimeout(this.rerenderTimeoutID),this.rerenderTimeoutID=setTimeout(function(){this.clearMarkers(!0),this.renderMarkers(),setTimeout(function(){this.clearMarkers(!0),this.renderMarkers()}.bind(e),300)}.bind(e),200)},disableMouseClickEventsListener:function(e){"comment"===this.viewMode&&(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault())},keydownEventListener:function(e){"Escape"===e.key&&"editor"===this.viewMode&&this.setMode({mode:"comment"})},clickEventListener:function(e){if(!e.isTrusted)return!1;if(this.parentWindow.postMessage({message:"Frame",method:"frameClick"},"*"),this.viewMode||this.parentWindow.postMessage({message:"Frame",method:"getMode"},"*"),"comment"===this.viewMode){if(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),~e.target.classList.value.indexOf("webvizio_marker")||~e.target.classList.value.indexOf("webvizio_marker_num")){var n=e.target;~e.target.classList.value.indexOf("webvizio_marker_num")&&(n=e.target.parentNode);let t=this.tasks.find((function(e){return e.num===parseInt(n.getAttribute("webvizio-marker-id"))}));return this.changeBorderColor(t),this.currentTask=t,this.parentWindow.postMessage({message:"Frame",method:"setCurrentTask",currentTask:this.currentTask},"*"),setTimeout(function(){this.scrollToMarker(t)}.bind(this)),!0}if("guest"===this.role||"viewer"===this.role)return!1;this.setViewMode("editor");try{this.parentWindow.postMessage({message:"Frame",method:"showEditor",task:this.setTask(e)},"*");var r=this.setTask(e)}catch(e){this.setViewMode("comment"),this.clearMarkers(!0),this.renderMarkers()}let i={inlineStylesheet:!0};return this.advancedSettings.includes("snapshot_images")&&(i.inlineImages=!0),this.taskSnapshot=t.snapshot(document,i),this.parentWindow.postMessage({message:"Frame",method:"createNewTask",task:r,snapshot:this.taskSnapshot},"*"),this.tasks.push(r),this.taskSnapshot=null,!1}if("browse"===this.viewMode){~e.target.classList.value.indexOf("webvizio_edl")||this.hideExternalDomainLinkTooltip();var i={type:"BreakException"},o={type:"SkipException"};try{(e.path||e.composedPath&&e.composedPath()).forEach(function(t){if(t.tagName&&"a"===t.tagName.toLowerCase()&&t.href){const r=new CustomEvent("WebVizioEvent",{bubbles:!0,cancelable:!0,detail:{prevEvent:e}});window.dispatchEvent(r);var n=new URL(t.href);if(n.searchParams.delete("wv_v"),n.host.toLowerCase()===location.host&&(n.host=this.host.toLowerCase()),"#"===t.getAttribute("href"))throw o;if(this.isAnchorLink(t.getAttribute("href"))&&!this.advancedSettings.includes("hash_routing"))throw o;if(~t.getAttribute("href").indexOf("tel:")||~t.getAttribute("href").indexOf("mailto:"))throw i;if(~t.getAttribute("href").indexOf("javascript:"))return;if(n.host.toLowerCase()!==this.host.toLowerCase()&&n.host.toLowerCase()!=="www."+this.host.toLowerCase()&&"www."+n.host.toLowerCase()!==this.host.toLowerCase()&&(!this.advancedSettings.includes("hash_routing")||"#"!=t.getAttribute("href").substring(0,1)))throw this.showExternalDomainLinkTooltip(e,t),i;~n.pathname.toLowerCase().indexOf("javascript:")||!(n.pathname.toLowerCase()!==location.pathname.toLowerCase()||n.search.toLowerCase()!==location.search.toLowerCase()||this.advancedSettings.includes("hash_routing")&&n.hash.toLowerCase()!==location.hash.toLowerCase())||n.host.toLowerCase()!==this.host.toLowerCase()&&n.host.toLowerCase()!=="www."+this.host.toLowerCase()&&"www."+n.host.toLowerCase()!==this.host.toLowerCase()&&n.host.toLowerCase()!==location.host||setTimeout(function(){throw(!e.defaultPrevented||e.defaultPrevented&&!~n.href.indexOf("#")||t.classList.contains("wv-virtual-link"))&&this.addNewSource(n.href),i}.bind(this))}}.bind(this))}catch(t){if(console.log("catchException",t),t.type&&"BreakException"===t.type)e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();else if(!t.type||"SkipException"!==t.type)return e.preventDefault(),!1}}},isAnchorLink(e){var t=new URL(e,"https://"+this.host),n=new URL(this.url);return t.host===n.host&&t.pathname===n.pathname&&t.search===n.search},addNewSource(e){console.log("addNewSource",e),this.parentWindow.postMessage({message:"Frame",method:"createSource",url:e},"*")},setCurrentTask:function(t){t.currentTask?(this.changeBorderColor(t.currentTask),this.scrollToMarker(t.currentTask),this.currentTask=t.currentTask,~this.tasks.findIndex(function(e){return this.currentTask&&e.id===this.currentTask.id}.bind(e))||this.tasks.push(this.currentTask),document.documentElement.classList.add("has_active_webvizio_marker")):(this.changeBorderColor(t.currentTask),this.currentTask=null,document.documentElement.classList.remove("has_active_webvizio_marker")),this.clearMarkers(!0),this.renderMarkers()},cancelCreateTask:function(t){this.setViewMode("comment");var n=this.tasks.findIndex(function(e){return null===e.num}.bind(e));~n&&this.tasks.splice(n,1),document.querySelector("div.marker_new")&&document.querySelector("div.marker_new").remove()},taskCreated:function(e){this.setViewMode("comment")},destroyTask:function(e){this.tasks.splice(this.tasks.findIndex((t=>t.id===e.task.id)),1),document.querySelector("div.marker_"+e.task.num).remove(),e.task.id===this.currentTask.id&&(this.currentTask=null)},getTasks:function(e){this.parentWindow.postMessage({message:"Frame",method:"getTasks",duration:500},"*")},setMarkers:function(t){return new Promise((function(n,r){setTimeout(function(){this.host=t.host||null,this.url=t.url||null,this.tasks=t.tasks,this.setViewMode(t.mode),this.sourceType=t.sourceType,this.currentTask=t.currentTask,this.clearMarkers(),this.tasks.length&&"browse"!==this.viewMode&&this.renderMarkers(),this.currentTask&&this.sendCurrentMarkerPosition(),this.parentWindow.postMessage({message:"Frame",method:"markersSettable"},"*"),n()}.bind(e),500)}))},sendCurrentMarkerPosition(){let e=document.querySelector(".webvizio_marker_active");if(!e)return!1;let t=e.getBoundingClientRect(),n=window.innerWidth||document.documentElement.clientWidth,r="left";t.left<n/2?r="left":t.right>n/2&&(r="right"),this.parentWindow.postMessage({message:"Frame",method:"currentTaskPosition",position:r},"*")},getParameterByName(e,t=window.location.href){e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},setTasksPanelVisible:function(e){this.tasksPanelVisible=e.tasksPanelVisible},renderMarkers:function(){("comment"==this.viewMode||this.currentTask)&&(this.snapshotMode?(this.currentTask.num=null,this.renderMarker(this.currentTask)):this.tasks.forEach(function(e){this.renderMarker(e)}.bind(e)))},setMode:function(e){this.setViewMode(e.mode),"browse"===e.mode?this.clearMarkers(!0):"comment"===e.mode&&this.renderMarkers()},setRole:function(e){this.role=e.role,document.querySelector("html").classList.add("webvizio-role-"+e.role),document.querySelector("html").classList.remove("webvizio-full-access"),"guest"!==this.role&&"viewer"!==this.role&&document.querySelector("html").classList.add("webvizio-full-access")},setAdvancedSettings:function(e){this.advancedSettings=e.settings},setViewMode:function(e){this.viewMode!==e&&("browse"===e?document.querySelector("html").classList.remove("wv-task-mode"):"comment"===e&&document.querySelector("html").classList.add("wv-task-mode"),this.viewMode=e)},clearMarkers:function(t=!1){var n=document.querySelectorAll(".webvizio_marker");n.length&&n.forEach(function(e){!t&&this.tasks.find((function(t){return t.num==e.getAttribute("webvizio-marker-id")}))||e.classList.contains("marker_new")||e.remove()}.bind(e))},messageEventListener:function(e){"object"==typeof e.data&&e.data.method&&"function"==typeof this[e.data.method]&&this[e.data.method](e.data)},changeBorderColor:function(e){this.currentTask&&document.querySelector("div.marker_"+this.currentTask.num)&&document.querySelector("div.marker_"+this.currentTask.num).classList.remove("webvizio_marker_active"),e&&document.querySelector("div.marker_"+e.num)&&document.querySelector("div.marker_"+e.num).classList.add("webvizio_marker_active")},scrollToMarker:function(e){e.hasOwnProperty("num")&&null!=e.num||(e.num="new");var t=document.querySelector("div.marker_"+e.num),n=0;if(t)n=parseInt(this.findPos(t))-window.innerHeight/2;else{if(!e.browser_context.scroll||!e.browser_context.scroll.y)return void console.warn("Cannot find element with num '"+e.num+"'.");n=parseInt(e.browser_context.scroll.y)}Number.isInteger(Math.round(n))&&window.scroll({top:n,behavior:"smooth"})},findPos:function(e){var t=0;if(e.offsetParent){do{t+=e.offsetTop}while(e=e.offsetParent);return t}},getCssProperty:function(e,t){return(e.currentStyle||window.getComputedStyle(e,""))[t]},getValidEl:function(e){for(var t=e.target;!(t.offsetWidth&&t.offsetHeight||"body"===t.nodeName.toLowerCase());)t=t.parentNode;t||(t=document.querySelector("body"));for(var n=t.getBoundingClientRect(),r=t;t&&"body"!==t.nodeName.toLowerCase();){if(t.parentNode&&"function"==typeof t.parentNode.getBoundingClientRect){var i=t.parentNode.getBoundingClientRect();(i.width<n.width||i.height<n.height||i.width===n.width&&i.height===n.height)&&e.pageX>n.left&&e.pageX<n.left+n.width&&e.pageY>n.top&&e.pageY<n.top+n.height&&e.pageX>i.left&&e.pageX<i.left+i.width&&e.pageY>i.top&&e.pageY<i.top+i.height&&(n=(r=t.parentNode).getBoundingClientRect())}t=t.parentNode}return r},getNonStaticParent:function(e){let t=e.style.position?e.style.position:this.getCssProperty(e,"position");for(;"static"===t&&"none"===this.getCssProperty(e,"transition");)t=(e=e.parentNode).style.position?e.style.position:this.getCssProperty(e,"position");return e},mouseoverEventListener:function(e){if(!e.target.classList||!e.target.classList.contains("webvizio_marker")&&!e.target.classList.contains("webvizio_marker_num")){var t=this.getValidEl(e),n=this.domElementPath(t);"page"!==this.sourceType||"comment"!==this.viewMode||this.lastHoverElPath&&this.lastHoverElPath===n||(this.lastHoverElPath=n,this.renderFrame(document.querySelector(this.domElementPath(t))))}},mouseoutEventListener:function(e){document.querySelectorAll(".webvizio_frame").forEach((function(e){e.remove()}))},setTask:function(e,t=!1){var n=this.getValidEl(e),r=n.getBoundingClientRect(),i=e.clientX-r.left,o=e.clientY-r.top,s=i/r.width,a=o/r.height,l={element_path:this.domElementPath(n),offset_x:s,offset_y:a,pin_x:e.clientX,pin_y:e.clientY,scroll_x:window.scrollX,scroll_y:window.scrollY,elements:this.getElementParentPositions(e,n),num:null};return this.renderMarker(l),l},getElementParentPositions(e,t){var n=!1,r=[];return this.parentElements(t).reverse().forEach(function(t,i){var o=this.domElementPath(t.element);if(!n){var s=t.element.getBoundingClientRect(),a=e.clientX-s.left,l=e.clientY-s.top,c=a/s.width,d=l/s.height;r.push({element_path:this.domElementPath(t.element),offset_x:c,offset_y:d})}0===o.indexOf("body")&&(n=!0)}.bind(this)),r},getParentBox:function(e){let t=e.offsetParent;if(!t)return document.body;for(;"body"!==t.nodeName.toLowerCase()&&"static"===this.getCssProperty(t,"position")&&"none"===this.getCssProperty(t,"transform");)t=t.offsetParent;return"static"===this.getCssProperty(t,"position")&&"none"===this.getCssProperty(t,"transform")&&(t=document.querySelector("body")),t},copyToClipboard(e){var t=document.body.appendChild(document.createElement("input"));t.value=e,t.focus(),t.select(),document.execCommand("copy"),t.parentNode.removeChild(t),this.parentWindow.postMessage({message:"Frame",method:"externalDomainLinkCopied"},"*"),this.hideExternalDomainLinkTooltip()},hideExternalDomainLinkTooltip(){document.querySelectorAll("div.webvizio_edl_tooltip").forEach((function(e){e.remove()}))},showExternalDomainLinkTooltip(t,n){this.hideExternalDomainLinkTooltip();var r=document.createElement("div");r.classList.add("webvizio_edl"),r.classList.add("webvizio_edl_arrow");var i=document.createElement("div");i.classList.add("webvizio_edl"),i.classList.add("webvizio_edl_text"),i.innerHTML="External domain link";var o=document.createElement("div");o.classList.add("webvizio_edl"),o.classList.add("webvizio_edl_svgbox"),o.title="Copy link",o.innerHTML='<svg width="24" height="25" viewBox="0 0 24 25" xmlns="http://www.w3.org/2000/svg">\n<path d="M16.0906 2.70312H5.18146C4.18146 2.70312 3.36328 3.52131 3.36328 4.52131V17.2486H5.18146V4.52131H16.0906V2.70312ZM18.8178 6.33949H8.81783C7.81783 6.33949 6.99964 7.15767 6.99964 8.15767V20.8849C6.99964 21.8849 7.81783 22.7031 8.81783 22.7031H18.8178C19.8178 22.7031 20.636 21.8849 20.636 20.8849V8.15767C20.636 7.15767 19.8178 6.33949 18.8178 6.33949ZM18.8178 20.8849H8.81783V8.15767H18.8178V20.8849Z"/>\n</svg>',o.onclick=function(){this.copyToClipboard(n.href)}.bind(e);var s=document.createElement("div");s.classList.add("webvizio_edl"),s.classList.add("webvizio_edl_tooltip");var a,l,c=n.getBoundingClientRect(),d=0;a=t.pageX-104,l=c.y+window.scrollY-50,a+208>window.innerWidth?(d=a-(window.innerWidth-212)-2,a=window.innerWidth-212):a<4&&(d=a-6,a=4),0!==d&&r.setAttribute("style","left: calc(50%  + "+d+"px);"),c.y<54&&(l=c.y+window.scrollY+c.height+6,r.setAttribute("style","top: -5px;transform: rotate(180deg);")),s.setAttribute("style","left: "+a+"px;top: "+l+"px;"),s.appendChild(r),s.appendChild(i),s.appendChild(o),document.body.appendChild(s)},renderMarker:function(e,t=0){var n=function(){return e.container_context&&e.container_context.elements&&Array.isArray(e.container_context.elements)&&e.container_context.elements.length},r=t&&n()?e.container_context.elements[t].element_path:e.element_path,i=document.querySelector(r),o=this.notFoundMarkers.findIndex((function(t){return t.id===e.id}));if(!i||!this.checkVisibility(i))return~o||this.notFoundMarkers.push(e),void(n()&&this.renderMarker(e,++t));~o&&this.notFoundMarkers.splice(o,1);var s=this.currentTask&&e.id===this.currentTask.id;let a=this.getParentBox(i);var l,c,d,u=i.getBoundingClientRect(),h=a.getBoundingClientRect(),m=t&&n()?e.container_context.elements[t].offset_x:e.offset_x,p=t&&n()?e.container_context.elements[t].offset_y:e.offset_y;if("file"===this.sourceType||"figma"===this.sourceType)l=100*m+"%",c=100*p+"%";else{l=u.left-h.left+m*u.width+"px";var f=h.top;"BODY"===a.nodeName.toUpperCase()&&(f=document.querySelector("html").getBoundingClientRect().top),c=u.top-f+p*u.height+a.scrollTop+"px"}if(e.num&&document.querySelector("div.marker_"+e.num))(d=document.querySelector("div.marker_"+e.num)).style.left=l,d.style.top=c,s&&d.classList.add("webvizio_marker_active");else{document.querySelectorAll("div.marker_new").forEach((function(e){e.remove()})),d=document.createElement("div");var v=document.createElement("span");if(v.innerHTML=null!==e.num&&"new"!==e.num?e.num:"",v.classList.add("webvizio_marker_num"),e.num>999&&v.classList.add("webvizio_marker_1000"),d.classList.add("marker_"+(null!==e.num?e.num:"new")),d.classList.add("webvizio_marker"),d.classList.add("userflow-webvizio_marker"),s&&d.classList.add("webvizio_marker_active"),t>0&&d.classList.add("webvizio_marker_gray"),d.setAttribute("webvizio-marker-id",null!==e.num?e.num:"new"),d.setAttribute("style","left: "+l+";top: "+c+";"),d.appendChild(v),"body"!==i.nodeName.toLowerCase()){if(~["TD","TH"].indexOf(i.nodeName))return i.appendChild(d);i.parentNode.appendChild(d)}else i.appendChild(d)}},checkVisibility:function(e){return"function"==typeof e.checkVisibility?e.checkVisibility({opacityProperty:!0,visibilityProperty:!0,contentVisibilityAuto:!0}):this.customCheckVisibility(e)},customCheckVisibility:function(e){if(null===e||!(e instanceof Element))return!0;let t=window.getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility&&this.customCheckVisibility(e.parentNode)},updateTaskMarker:function(e){this.clearMarkers(),this.renderMarkers(),this.renderMarker(e.task),this.scrollToMarker(e.task)},showTaskSnapshot:function(e){this.loadSnapshot(e.snapshotUrl,e.clickNotification)},loadSnapshot(n,r=!0){fetch(n).then((e=>e.json())).then((n=>{t.rebuild(n,{doc:document,hackCss:!0}),document.querySelectorAll("[x-show],[v-if],[v-else],[v-show],[x-if]").forEach((e=>{e.removeAttribute("x-show"),e.removeAttribute("x-if"),e.removeAttribute("v-if"),e.removeAttribute("v-else"),e.removeAttribute("v-show")})),document.querySelector("html").classList.remove("wv-task-mode");var i=document.getElementsByTagName("head")[0],o=document.createElement("link");o.id="webvizioCss",o.rel="stylesheet",o.type="text/css",o.href=this.scriptOrigin+"/css/webvizio.css",o.media="all",i.appendChild(o);let s=document.querySelector(".marker_new.webvizio_marker");for(;s;)s.classList.add(":hover"),s=s.parentElement;this.scrollToElement(document.querySelector(".marker_new.webvizio_marker"));let a=document.getElementsByTagName("a");for(var l=0;l<a.length;l++)a[l].onclick=function(){return!1};if(document.querySelectorAll(".webvizio_marker").forEach((e=>{e.classList.contains("marker_new")||e.parentNode.removeChild(e)})),setTimeout((function(){document.querySelector(".marker_new").scrollIntoView({block:"center"})}),500),r){let e=document.createElement("div"),t=null;e.classList.add("webvizio-snapshot-popup"),e.innerHTML="You cannot interact with this page in snapshot mode. Please switch to task or browse mode to continue working with tasks.",document.body.appendChild(e),window.addEventListener("click",(function(e){let n=document.querySelector(".webvizio-snapshot-popup");n.style.left=e.pageX+"px",n.style.top=e.pageY+20+"px",n.style.display="block",t&&clearTimeout(t),t=setTimeout((function(){n.style.display="none"}),2e3)}))}this.snapshotMode=!0,"page"!==this.sourceType&&setTimeout(function(){addEventListener("resize",this.resizeEventListener.bind(this),!1),addEventListener("scroll",this.scrollEventListener.bind(this),!1)}.bind(e),2e3),this.parentWindow.postMessage({message:"Frame",method:"frameSnapshotLoaded"},"*")})).catch((e=>{console.log(e),this.parentWindow.postMessage({message:"Frame",method:"frameSnapshotLoaded"},"*")}))},scrollToElement(e){e.scrollIntoView(!0);let t=Math.max(document.documentElement.clientHeight,window.innerHeight||0);window.scrollBy(0,(e.getBoundingClientRect().height-t)/2)},clearCache:async function(e){let t=performance.getEntriesByType("resource"),n=["script","img","css","link","stylesheet","svg","media"],r=[];for(let e=0;e<t.length;e++)n.includes(t[e].initiatorType)&&r.push(t[e].name);try{let e=r.map((e=>fetch(e,{cache:"reload",credentials:"include",mode:"no-cors"})));await Promise.all(e)}catch(e){console.warn(e)}this.parentWindow.postMessage({message:"Frame",method:"frameCacheCleared"},"*")},isElementInViewport(e){"function"==typeof jQuery&&e instanceof jQuery&&(e=e[0]);var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},renderFrame(e){if(e){var t=e.getBoundingClientRect(),n=document.createElement("div");n.classList.add("webvizio_frame"),n.setAttribute("style","left: "+(t.x+this.getScrollX())+"px;top: "+(t.y+this.getScrollY())+"px;width: "+(t.width-2)+"px;height: "+(t.height-2)+"px;"),document.body.appendChild(n)}},getScrollX:function(){let e=(document.body||document.documentElement||document.body.parentNode).scrollLeft;return void 0!==e&&e>0?e+window.scrollX:window.scrollX},getScrollY:function(){let e=(document.body||document.documentElement||document.body.parentNode).scrollTop;return void 0!==e&&e>0?e+window.scrollY:window.scrollY},parentElements:function(e){const t=[];for(;e;){const n=e.nodeName.toLowerCase(),r=e.id?`#${this.selectorIdentifierSymbolFix(e.id)}`:"";let i="";if(e.className&&"string"==typeof e.className){let t=e.className.split(" "),n=null,r=0;for(;(!n||~n.indexOf("."))&&r<t.length;)n=this.selectorIdentifierSymbolFix(t[r]),r++;i=`.${n.trim().replace(/\s+/g,".").replace(/[+{}()|[\]\\]/gi,"\\$&")}`}t.unshift({element:e,selector:n+r+i}),e=e.parentNode!==document&&e.parentNode}return t},selectorIdentifierSymbolFix:e=>"string"==typeof e||e instanceof String?(e=e.replaceAll(".","\\.")).replaceAll("#","\\#"):e,nthElement:function(e){let t=e,n=1;for(;null!==t.previousElementSibling;)t.previousElementSibling.nodeName===e.nodeName&&n++,t=t.previousElementSibling;return n},normalizeSelector(e){var t=(e=(e=e.replaceAll("\\#","webvizio_selector_hash")).replaceAll("\\.","webvizio_selector_dot")).replaceAll("/","\\/").replaceAll(" ","\\ ").replaceAll("=","\\=").replaceAll("@","\\@").replaceAll("%","\\%").replaceAll("$","\\$").replaceAll("^","\\^").replaceAll("*","\\*").replaceAll(";","\\;").replaceAll("?","\\?").replaceAll(/(:)(?!nth-of-type)(?=\S)/g,"\\:").split("."),n=[];return t.forEach((function(e){var t=e.split("#"),r=[];t.forEach((function(e){e.match(/^[a-zA-Z]/)&&r.push(e)})),r.length&&n.push(r.join("#"))})),(e=(e=n.join(".")).replaceAll("webvizio_selector_hash","\\#")).replaceAll("webvizio_selector_dot","\\.")},nthSelectorNeeded:function(e,t){e=this.normalizeSelector(e);let n=""===t?e:`${t} > ${e}`;return"html"!=n&&document.querySelectorAll(n).length>1},buildPathString:function(e){const t=[];return e.forEach((e=>{e.selector&&!this.nthSelectorNeeded(e.selector,t.join(" > "))||(e.selector+=`:nth-of-type(${this.nthElement(e.element)})`),t.push(this.normalizeSelector(e.selector))})),t},domElementPath:function(e){if(void 0===e.tagName)throw new Error("element must be of type `HTMLElement`.");var t=this.buildPathString(this.parentElements(e)),n=[],r=t.length-2;for(n.push(t[t.length-1]);r>=0&&document.querySelectorAll(n.join(" > ")).length>1;)n.unshift(t[r]),r--;return n.join(" > ")}};addEventListener("load",e.init(),!1),document.addEventListener("mousemove",(e=>{window.top.postMessage({eventName:"berrycast:external-iframe-mouse-move",data:{clientX:e.clientX,clientY:e.clientY+80}},"*")}))}}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},"loading"!==document.readyState?r():document.addEventListener("DOMContentLoaded",(function(){r()}))})();